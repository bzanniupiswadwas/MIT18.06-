接下来我们将会讲到行列式的应用，这也是关于行列式的最后一讲！我们探索一下行列式的价值！

# 逆矩阵的求解公式
在这之前，我们要求逆矩阵都得弄一个包含单位矩阵的增广矩阵，这次我们不再需要这么麻烦，因为我们这次有了一个公式求解逆矩阵！

首先我们有这么一个事实：$\begin{bmatrix}a&b\\c&d\end{bmatrix}^{-1}=\frac{1}{ad-bc}\begin{bmatrix}d&-b\\-c&a\end{bmatrix}$。（这个大家可以计算验证一下，虽然比较复杂。）
显然等式左边的矩阵是代数余子式矩阵（即其中各个对应元素为其对应位置的代数余子式）的转置，而这里称这个由代数余子式组成的矩阵的转置为伴随矩阵。

然后我们就可以把这个矩阵总结出来：$$A^{-1}=\frac{1}{|A|}C^T$$
现在我们来证明这个公式吧！
$A^{-1}=\frac{1}{|A|}C^T\Rightarrow AA^{-1}=\frac{1}{|A|}AC^T\Rightarrow |A|I=AC^T$
我们展开观察：$AC^T=\begin{bmatrix}a_{11}&a_{12}&\dots&a_{1n}\\\dots&\dots&\dots&\dots\\a_{n 1}&a_{n2}&\dots&a_{nn}\end{bmatrix}\begin{bmatrix}C_{11}&C_{21}&\dots&C_{n1}\\\dots&\dots&\dots&\dots\\C_{1n}&C_{2n}&\dots&C_{nn}\end{bmatrix}$
由于对 C 进行了转置，导致 A 每一个行向量与$𝐶^𝑇$对应列向量做内积后得到的正是 A 的行列式值，相当于行列式按每一行展开的逆运算。就像这样：$$AC^T=\begin{bmatrix}a_{11}&a_{12}&\dots&a_{1n}\\\dots&\dots&\dots&\dots\\a_{n 1}&a_{n2}&\dots&a_{nn}\end{bmatrix}\begin{bmatrix}C_{11}&C_{21}&\dots&C_{n1}\\\dots&\dots&\dots&\dots\\C_{1n}&C_{2n}&\dots&C_{nn}\end{bmatrix}=\begin{bmatrix}|A|&0&\dots&0\\0&|A|&\dots&0\\\dots&\dots&\dots&0\\0&0&\dots&|A|\end{bmatrix}=|A|\begin{bmatrix}1&0&\dots&0\\0&1&\dots&0\\\dots&\dots&\dots&0\\0&0&\dots&1\end{bmatrix}$$
然后这里有一个问题，那第一行为例，为什么$[𝑎_{11},𝑎_{12},…,𝑎_{1n}]$这个行向量在和不属于这行元素的代数余子式构成的列向量相乘时，得到的结果为零呢？也就是为什么$\begin{bmatrix}|A|&0&\dots&0\\0&|A|&\dots&0\\\dots&\dots&\dots&0\\0&0&\dots&|A|\end{bmatrix}$中除对角线外，其余元素都为零呢？
首先我们构造一个新矩阵：$\begin{bmatrix}a_{11}&a_{12}&\dots&a_{1n}\\a_{11}&a_{12}&\dots&a_{1n}\\\dots&\dots&\dots&\dots\\a_{n 1}&a_{n2}&\dots&a_{nn}\end{bmatrix}$，这个矩阵中第一行与第二行是相等的，刚好摘掉这一行后代数余子式是和$\begin{bmatrix}a_{11}&a_{12}&\dots&a_{1n}\\a_{21}&a_{22}&\dots&a_{2n}\\\dots&\dots&\dots&\dots\\a_{n 1}&a_{n2}&\dots&a_{nn}\end{bmatrix}$是一样的！（构造新矩阵这个有点难以理解大家多多体会！）
显然这个矩阵的行列式等于0（行列式性质4！）。然后我们可以展开第二行的求解公式：$a_{11}C_{21}+a_{12}C_{22}+\dots+a_{1n}a_{2n}=0$！其他的以此类推，得到结论：矩阵 A 的某一行（或列）与**不属于该行（或列）的代数余子式**相乘时，结果为零！
到此证明完毕！

# 克莱姆法则
这是一种求解Ax=b的方法！
$Ax=b\Rightarrow x=A^{-1}b\Rightarrow x=\frac{1}{|A|}C^Tb$。而$C^Tb$这里面有大文章！首先我们一个个拆开来看：$x_{1}=\begin{bmatrix}c_{11}&c_{12}&c_{13}&\dots&c_{1n}\end{bmatrix}b$。这个是不是很像一个求解行列式的代数余子式！那么我们可以这么认为：$x_{1}=\frac{\det B_{1}}{\det A},x_{2}=\frac{\det B_{2}}{\det A}\dots.$
那么矩阵$B_{1}$是怎么样的呢！其实这个与上文我们构造新矩阵的时候是一样的！首先代数余子式是与A矩阵的代数余子式完全一样的（或者说伴随矩阵完全一样）。然后仅仅是展开的那一列不一样（为什么是列，因为伴随矩阵被转置了！），所以矩阵$B_{1}$是由矩阵A换掉第1列为b后的结果！以此类推：矩阵$B_{i}是由矩阵A换掉第i列为b后的结果$。就像这样：$B_{1}=\begin{bmatrix}b&a_{11}&a_{12}&\dots&a_{1n}\\b&a_{21}&a_{22}&\dots&a_{2n}\\b&\dots&\dots&\dots&\dots\\b&a_{n 1}&a_{n2}&\dots&a_{nn}\end{bmatrix}$！
这就是求解x的其他方法，但是这个方法的计算成本太高，不被经常运用！由于这个课程属于美国，更倾向于像我们前面说的那样通过消元和回代去求解x，但是俄罗斯和我们国家就会倾向于用行列式去求解x（参考同济线性代数教材开始是以行列式求解为基础引出的矩阵！）

# 体积
接下来我们说说行列式的几何解释：
行列式的值是一个六面体（由行向量构成的）的体积。或者说是各个行或者各个列组成的立体图形的体积！在三维中就是一个6面体！
假设我们有矩阵：$A=\begin{bmatrix}a_{11}&a_{12}&a_{13}\\a_{21}&a_{22}&a_{23}\\a_{3 1}&a_{32}&a_{33}\end{bmatrix}$，反应到图像中就是：
![[../../image/Pasted image 20250803180855.png]]
这三个向量张成了一个平行六面体，而 A 的行列式的绝对值即为其体积。如图：
![[../../image/Pasted image 20250803181828.png]]
显然的是行列式的值是分正负的，所以该六面体的体积即为行列式的绝对值。而正负号的作用是告诉我们这个立体是左手边的还是右手边的。因为当我们调换这个立体的两条边之后，我们得到的会是不同系下的立体，其体积不会变，仅仅是旋转一下。

然后我们讨论一下几个特殊的矩阵：
（1） 单位阵$I$：
很明显，单位阵对应的就是三个边长为 1 的立方体，向量的方向就是各坐标轴的正方向。
（2） 正交阵 Q：
还记得我们之前介绍的正交阵 Q，它除了正交这个性质之外，还有一点，即各向量长度均为1$(𝑄^𝑇𝑄 = 𝐼)$。所以 Q 构成的立体图形也是三个边长为 1 的立方体，只是体现在坐标中时与 I 对应的立体图形位置不同。但是这里我们需要证明一下为什么正交矩阵的行列式是1或者-1：$𝑄^𝑇𝑄 = 𝐼\Rightarrow|𝑄^𝑇𝑄 |=|I|\Rightarrow|Q^T||Q|=|I|\Rightarrow|Q|^2=1\Rightarrow|Q|=1或者-1$！

当然我们可以通过这个定理去证明行列式性质的1，2，3。
性质一：就是单位向量构成的立体图形！体积是1，行列式则为1。
性质二：当交换矩阵的两行的时候，仅仅是改变立方体的方向，所以行列式的值改变正负性！
性质三：（1）$\begin{vmatrix}ta&tb\\c&d\end{vmatrix}=t\begin{vmatrix}a&b\\c&d\end{vmatrix}$，就意味着在立体图形中延长某几段边长，自然是对应体积的t倍。放在三维空间中就是在一个立方体中，找到其中相等的四条边延长t倍，其他8条边不变，想想看是不是体积增加了t-1倍。（在其他维度也一样！）
性质三：（2）$\begin{vmatrix}a+a^{'}&b+b^{'}\\c&d\end{vmatrix}=\begin{vmatrix}a&b\\c&d\end{vmatrix}+\begin{vmatrix}a^{'}&b^{'}\\c&d\end{vmatrix}$，同样以三维空间举例子，我们以行向量为基础构建立方体，这样就意味着找到其中相等的四条边延长一段长度，其他8条边不变，是不是就是加了另外一个立方体的体积。（在其他维度也一样！）

同样运用这个定理我们可以用来求三角形面积。当我们给出三角形3个点：$(x_{1},y_{1}),(x_{2},y_{2}),(x_{3},y_{3})$。如果过原点，那么$x_{1}=y_{1}=0$。那么我们求解矩阵:$\frac{1}{2}\begin{bmatrix}x_{2}&y_{2}\\x_{3}&y_{3}\end{bmatrix}$的行列式的一半。（原点的可以忽略）。如果$x_{1}\ne 0,y_{1}\ne 0$,我们就求解：$\frac{1}{2}\begin{bmatrix}x_{1}&y_{1}&1\\x_{2}&y_{2}&1\\x_{3}&y_{3}&1\end{bmatrix}$的行列式即可！我们计算这个行列式的时候会做一系列消元，例如 2 行-1 行，3 行-1 行消去 1。这一系列减法相当于将三角形移到原点位置（这个的证明我们就略过！），这样行列式求解便有效了。

# 讨论课
当我们有三个点$A_{1}(2,2,-1),A_{2}(1,3,0),A_{3}(-1,1,4)$。他们分别与原点相连并构成立体图形T（如下图），请你求解图形体积，当我们把$A_{3}$移动到(-201，-199，104)，这时体积如何？
![[../../image/Pasted image 20250803224749.png]]
然后我们补全得到：
![[../../image/Pasted image 20250803225031.png]]
我们P的体积等于矩阵$\begin{bmatrix}2&2&-1\\1&3&0\\-1&1&4\end{bmatrix}$行列式。然而我们来看看T和P的体积公式是什么：$V_{T}=\frac{1}{3}S_{三角形OA_{1}A_{2}}OA_{3},V_{P}=2S_{三角形OA_{1}A_{2}}OA_{3}$，所以P的体积是T的6倍！而$|P|=\begin{vmatrix}2&2&-1\\1&3&0\\-1&1&4\end{vmatrix}=12$，所以T的体积的2！如果我们移动$A_{3}$到(-201，-199，104)，就得到$|P|=\begin{vmatrix}2&2&-1\\1&3&0\\-201&-199&104\end{vmatrix}$，如果你继续计算会得到结果为12。但其实我们发现(-201，-199，104)是由(-1,1,4)-100(2,2,-1)得到的！这样的操作是不影响行列式的，所以体积不变！

# 习题课
#### 问题一
设矩阵 $A = \begin{bmatrix} 1 & 1 & 4 \\ 1 & 2 & 2 \\ 1 & 2 & 5 \end{bmatrix}$
求其伴随矩阵 C，并计算 $AC^T$ 以确定 $\det(A)$。

**解：**  
伴随矩阵 $C$ 为  
$C = \begin{bmatrix} 6 & -3 & 0 \\ 3 & 1 & -1 \\ -6 & 2 & 1 \end{bmatrix}$
计算 $AC^T$：  
$AC^T = \begin{bmatrix} 1 & 1 & 4 \\ 1 & 2 & 2 \\ 1 & 2 & 5 \end{bmatrix}\begin{bmatrix} 6 & 3 & -6 \\ -3 & 1 & 2 \\ 0 & -1 & 1 \end{bmatrix}= \begin{bmatrix} 3 & 0 & 0 \\ 0 & 3 & 0 \\ 0 & 0 & 3 \end{bmatrix} = 3I$
由于 $AC^T = \det(A)I$(之前推导过)，因此$\det(A) = 3$。  
若将 $a_{13} = 4$ 改为 100，行列式不变，因为该位置的代数余子式为 0，其值不影响行列式。

---

#### 问题二
球坐标  $\rho, \phi, \theta$ 满足 $x = \rho \sin\phi \cos\theta, \quad y = \rho \sin\phi \sin\theta, \quad z = \rho \cos\phi$
求所有偏导数构成的 3×3 矩阵：  
$\begin{bmatrix}\frac{\partial x}{\partial \rho} & \frac{\partial x}{\partial \phi} & \frac{\partial x}{\partial \theta} \\\frac{\partial y}{\partial \rho} & \frac{\partial y}{\partial \phi} & \frac{\partial y}{\partial \theta} \\\frac{\partial z}{\partial \rho} & \frac{\partial z}{\partial \phi} & \frac{\partial z}{\partial \theta}\end{bmatrix}$

**解：**  
该矩阵为:$\begin{bmatrix}\sin\phi \cos\theta & \rho \cos\phi \cos\theta & -\rho \sin\phi \sin\theta \\\sin\phi \sin\theta & \rho \cos\phi \sin\theta & \rho \sin\phi \cos\theta \\\cos\phi & -\rho \sin\phi & 0\end{bmatrix}$

计算其行列式 J（按第三行展开）：  
$$\begin{aligned}
J &= \cos\phi \cdot \begin{vmatrix}
\rho \cos\phi \cos\theta & -\rho \sin\phi \sin\theta \\
\rho \cos\phi \sin\theta & \rho \sin\phi \cos\theta
\end{vmatrix}
+ \rho \sin\phi \cdot \begin{vmatrix}
\sin\phi \cos\theta & -\rho \sin\phi \sin\theta \\
\sin\phi \sin\theta & \rho \sin\phi \cos\theta
\end{vmatrix} \\
&= \cos\phi \left( \rho^2 \cos\phi \sin\phi \cos^2\theta + \rho^2 \cos\phi \sin\phi \sin^2\theta \right) \\
&\quad + \rho \sin\phi \left( \rho \sin^2\phi \cos^2\theta + \rho \sin^2\phi \sin^2\theta \right) \\
&= \rho^2 \cos^2\phi \sin\phi + \rho^2 \sin^3\phi \\
&= \rho^2 \sin\phi (\cos^2\phi + \sin^2\phi) \\
&= \rho^2 \sin\phi
\end{aligned}$$
(上面的计算过程看似复杂，其实很简单，高中学过三角函数就不难理解了！)
因此，球坐标下的体积微元为：$dV = \rho^2 \sin\phi \, d\rho \, d\phi \, d\theta$！
