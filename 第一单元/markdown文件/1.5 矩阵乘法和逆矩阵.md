# 矩阵乘法（注意这与前面讲到的不一样哦）：

我们讨论了两个矩阵乘积AB=C的四种不同思考方式。如果A是一个m×n矩阵，B是一个n×p矩阵，则C是一个m×p矩阵。我们使用$c_{ij}$来表示矩阵C中第i行第j列的元素。

### 行乘以列,以结果矩阵的每个元素为单位计算
描述矩阵乘积的标准方式是说$c_{ij}$等于矩阵A的第i行与矩阵B的第j列的点积。总结就是，

$$
 c_{ij} = \sum_{k=1}^{n} a_{ik}b_{kj}. 

$$



### 列
矩阵A与矩阵B的第j列的乘积等于矩阵C的第j列。这告诉我们C的列是A的列的组合。

### 行
矩阵A的第i行与矩阵B的乘积等于矩阵C的第i行。因此，C的行是B的行的组合。

上面的列视角与行视角在上一讲的矩阵乘法的本质有详细说明！
### 列乘以行
A的列是一个m×1向量，而B的行是一个1×p向量。它们的乘积是一个矩阵：

$$
 \begin{bmatrix} 2 \\ 3 \\ 4 \end{bmatrix} \begin{bmatrix} 1 & 6 \end{bmatrix} = \begin{bmatrix} 2 & 12 \\ 3 & 18 \\ 4 & 24 \end{bmatrix}. 

$$

这个矩阵的列是A的列的倍数，而行是B的行的倍数。如果我们考虑这些行中的条目作为坐标(2, 12)或(3, 18)或(4, 24)，所有这些点都位于同一条直线上；对于结果矩阵中的两列向量也是方向相同的。之后我们会看到，这意味着该矩阵的行空间是一条直线，列空间也是如此。那么他的行空间与列空间都有特殊意义在。（这样的性质就运用在很高端的地方了，像是多维线性代数和量子力学）
A和B的乘积是这些“列乘以行”矩阵的和：

$$
 AB = \sum_{k=1}^{n} \begin{bmatrix} a_{1k} \\ \vdots \\ a_{mk} \end{bmatrix} \begin{bmatrix} b_{k1} & \cdots & b_{kp} \end{bmatrix}. 

$$
相加就是对应位置元素进行相加！
其实这个乘法他反应了一个本质性的东西，即结果矩阵的整个张量空间，就是由前面两个矩阵的各行各列结果进行叠加形成的。而值得一提的是每个行向量和列向量都是可以构建出更大规模的矩阵（外积）。这个性质在机器学习、数值线性代数中非常有用。

当然，我们还可以从向量的视角去理解这个：
还记得向量的点乘吧，那么结果矩阵第一行第一列的位置元素等于第一个矩阵的第一行行向量与第二个矩阵的第一列列向量的数量积！其他位置的元素也是以此类推！只不过运算起来很是麻烦！

### 块
如果我们适当地将A和B分成匹配的块，我们可以用块的乘积写出乘积AB=C：

$$
 \begin{bmatrix} A_1 & A_2 \\ A_3 & A_4 \end{bmatrix} \begin{bmatrix} B_1 & B_2 \\ B_3 & B_4 \end{bmatrix} = \begin{bmatrix} C_1 & C_2 \\ C_3 & C_4 \end{bmatrix}. 

$$

这里 $C_1 = A_1B_1 + A_2B_3$。这与前面的行视角是一致的，只是范围扩大了

# 逆矩阵
### 方阵
如果A是一个方阵，你能问它的最重要的问题就是它是否有逆矩阵$A^{-1}$。如果有，那么$A^{-1}A=I=AA^{-1}$，我们称A为可逆或非奇异的。（但是不要认为如果A，B两个矩阵都是一个方阵，那么AB=BA）
如果A是奇异的——即A没有逆——其行列式为零，并且我们可以找到某个非零向量x使得Ax=0。例如：

$$
 \begin{bmatrix} 1 & 3 \\ 2 & 6 \end{bmatrix} \begin{bmatrix} 3 \\ -1 \end{bmatrix} = \begin{bmatrix} 0 \\ 0 \end{bmatrix}. 

$$

在这个例子中，三倍的第一列减去第二列等于零向量；这两个列向量位于同一条直线上。
找到一个矩阵的逆与解线性方程组密切相关：

$$
 \begin{bmatrix} 1 & 3 \\ 2 & 7 \end{bmatrix} \begin{bmatrix} a & c \\ b & d \end{bmatrix} = \begin{bmatrix} 1 & 0 \\ 0 & 1 \end{bmatrix}. 

$$

可以读作“A乘以$A^{-1}$的第j列等于单位矩阵的第j列”。这只是方程Ax=b的一个特殊形式。

我们其实可以得出一个结论：`可逆的矩阵一定是方阵，但是方阵不一定可逆。`
给大家一个理性的解释：
一个 `4×3` 的矩阵，它的列向量虽然在 $\mathbb{R}^4$ 中，但只有 3 个，顶多只能撑起一个三维的空间； 它不能覆盖整个四维空间，所以不能“还原”所有信息，自然无法可逆； 而且它的行数大于列数，这些行向量都在 $\mathbb{R}^3$ 里，却有 4 个，肯定线性相关，这也说明它不是一个“满秩”的矩阵，所以也不可逆。所以一个非方阵矩阵一定不是可逆的。
### 高斯-约旦消元法
我们可以使用消元的方法同时解决两个或更多的线性方程。只需将整个单位矩阵I附加到矩阵上：

$$
 \left[\begin{array}{cc|cc} 1 & 3 & 1 & 0 \\ 2 & 7 & 0 & 1 \end{array}\right] \rightarrow \left[\begin{array}{cc|cc} 1 & 3 & 1 & 0 \\ 0 & 1 & -2 & 1 \end{array}\right] \rightarrow \left[\begin{array}{cc|cc} 1 & 0 & 7 & -3 \\ 0 & 1 & -2 & 1 \end{array}\right]. 

$$

一旦我们使用高斯消元法将原矩阵转换为上三角形式后，我们将继续使用高斯的想法消除矩阵右上部分的元素将其转换为一个单位矩阵。那么：

$$
 A^{-1} = \begin{bmatrix} 7 & -3 \\ -2 & 1 \end{bmatrix}. 
$$

就像上一讲一样，我们可以将消元方法的结果写成一系列消元矩阵$E_{ij}$与矩阵A的乘积。设E为所有$E_{ij}$的乘积（就是说E是记录了上面A与I这个增广矩阵的一系列变换的矩阵），我们使用块矩阵写下高斯-约旦消元的结果（描述上面的一系列操作）：

$$
 E[A | I] = [I | E]. 

$$

如果EA=I，则E=$A^{-1}$。

## 番外
矩阵的是否线性独立，矩阵是否为奇异矩阵，矩阵行列式是否为0（注意方阵才有行列式哦，本质上行列式是方阵的一个标量值，它可以用来描述矩阵所代表的线性变换对空间体积的影响。），矩阵是否可以转化为上三角或者下三角矩阵，我们在之前的学习中接触到了这些概念。这几个似乎有着千丝万缕的关系。
- **线性独立 ↔ 非奇异矩阵**：如果一个方阵的所有列（或行）向量线性独立，那么它是非奇异的，反之亦然。
- **行列式 = 0 ↔ 奇异矩阵**：行列式为0直接表明矩阵是奇异的，无法求逆。
- **能够转换为三角矩阵**：虽然任何方阵都可以通过高斯消元法转换为三角形式，但如果在过程中出现例如全零行的情况（即某一步后无法继续消除元素），则表明原矩阵是奇异的，行列式为0，且存在线性依赖的列（或行）。
希望这个解释可以帮助大家系统的认识前面的所学！


所以在这一讲中，我们需要懂得从5个不同的角度去看待矩阵乘法，同时要懂得如何判断一个矩阵是否可逆以及如何去计算一个矩阵的逆（如果矩阵可逆的话）！第一个我们得自己品味，而第二个判断矩阵是否可逆可以通过转换为三角形式（主对角线元素不可出现0）去判断（当然会有一些可以简单判断的情况，比如有两列元素相等或者成倍数，或者有一行元素全为0）。而第三点当然可以通过高斯消元法去得到！


当然在这些操作中有一些让大家疑惑的操作：
对一个矩阵的一整行做乘法或着一整列做乘法；
对一个矩阵进行行置换或者列置换；
让一行或者一列去加减另外一个行或者列的倍数；
这些操作在矩阵的操作中十分常见，相信大家在大家看到这些操作出现在求逆或者消元的过程中不免担心是否回影响矩阵的本质呢！下面我们一一说明这些操作对矩阵本质的影响（涉及一些未学到的知识，但是无需在意，重点在于理解这些操作的影响）

| 操作类型                    | 数学表示                         | 矩阵视角                     | 是否改变秩 | 是否影响行列式<br>（仅对方阵） | 是否影响可逆性          | 是否改变解空间<br>（在线性方程组中） | 是否改变矩阵结构 |
| ----------------------- | ---------------------------- | ------------------------ | ----- | ----------------- | ---------------- | -------------------- | -------- |
| **行乘法**<br>（非零常数 $ c $） | $R_i \leftarrow c R_i$       | 左乘一个对角线上为 $c$ 的初等矩阵      | ❌ 否   | ✅ 是（乘以 $c$）       | ❌ 否（若 $c \ne 0$） | ❌ 否                  | ✅ 是      |
| **列乘法**<br>（非零常数 $ c $） | $C_j \leftarrow c C_j$       | 右乘一个对角线上为 $c$ 的初等矩阵      | ❌ 否   | ✅ 是（乘以 $c$）       | ❌ 否（若 $c \ne 0$） | ✅ 是（变量缩放）            | ✅ 是      |
| **行置换**<br>（交换两行）       | $R_i \leftrightarrow R_j$    | 左乘一个置换矩阵                 | ❌ 否   | ✅ 是（变号）           | ❌ 否              | ❌ 否                  | ✅ 是      |
| **列置换**<br>（交换两列）       | $C_i \leftrightarrow C_j$    | 右乘一个置换矩阵                 | ❌ 否   | ✅ 是（变号）           | ❌ 否              | ✅ 是（变量顺序变化）          | ✅ 是      |
| **行加法**<br>（某行加另一行的倍数）  | $R_i \leftarrow R_i + c R_j$ | 左乘一个单位矩阵+非对角元为 $c$ 的初等矩阵 | ❌ 否   | ❌ 否               | ❌ 否              | ❌ 否                  | ✅ 是      |
| **列加法**<br>（某列加另一列的倍数）  | $C_j \leftarrow C_j + c C_i$ | 右乘一个单位矩阵+非对角元为 $c$ 的初等矩阵 | ❌ 否   | ❌ 否               | ❌ 否              | ✅ 是（变量组合变化）          | ✅ 是      |
所以这些操作在我们目前学习的范畴中，是不影响，所以高斯消元法可以放心使用的！

番外还要给大家总结的是一些向量乘法：
内积，外积，张量积。内积就是我们第一讲说到的点乘也叫数量积。而外积却与叉乘不一样，外积他是行向量与列向量之间的乘积，结果为矩阵。而张量积则是一两个向量（维度是任意的），结果是更高维的对象。所以我们常说外积是特殊的张量积！


## 讨论课
有这么个矩阵：
$$ A = \begin{bmatrix}a & b & b\\ a & a & b \\ a & a & a\end{bmatrix} $$
首先，当a，b满足什么条件的时候矩阵可逆，然后求出他的逆。
首先如果我们没有学习高斯消元法以及矩阵乘法的一些相关操作，那么我们想到的是两个列不能相同或者成倍数，那么$a \neq b$的。其次，不可出现全0行，那么$a \neq 0$，但是这样不严谨，那么我们干脆系统性的用高斯消元法来解决。
$[A | I] = [I | A^{-1}]$，那么：
$$ \left[ \begin{array}{ccc|ccc} a & b & b & 1 & 0 & 0 \\ a & a & b & 0 & 1 & 0 \\ a & a & a & 0 & 0 & 1 \end{array} \right] $$
那么让第二行和第三行减去第一行。得到：
$$ \left[ \begin{array}{ccc|ccc} a & b & b & 1 & 0 & 0 \\ 0 & a-b & 0 & -1 & 1 & 0 \\ 0 & a-b & a-b & -1 & 0 & 1 \end{array} \right] $$
然后第3行减去第二行。那么：
$$ \left[ \begin{array}{ccc|ccc} a & b & b & 1 & 0 & 0 \\ 0 & a-b & 0 & -1 & 1 & 0 \\ 0 & 0 & a-b & 0 & -1 & 1 \end{array} \right] $$
然后第一行除以a，第二行除以a-b，第三行除以a-b。那么：
$$ \left[ \begin{array}{ccc|ccc} 1 & \frac{b}{a} & \frac{b}{a} & \frac{1}{a} & 0 & 0 \\ 0 & 1 & 0 & \frac{-1}{a-b} & \frac{1}{a-b} & 0 \\ 0 & 0 & 1 & 0 & \frac{-1}{a-b} & \frac{1}{a-b} \end{array} \right] $$
然后第一行先减去第二行的$\frac{b}{a}$倍，然后减去第三行的$\frac{b}{a}$倍。那么：
$$ \left[ \begin{array}{ccc|ccc} 1 & 0 & 0 & \frac{1}{a-b} & 0 & \frac{-b}{a(a-b)} \\ 0 & 1 & 0 & \frac{-1}{a-b} & \frac{1}{a-b} & 0 \\ 0 & 0 & 1 & 0 & \frac{-1}{a-b} & \frac{1}{a-b} \end{array} \right] $$
完成后，我们发现$a \neq b$即可！还求出了逆。

### 习题课
本次的习题课的两个题目，一个是用高斯消元法消元，上面以及有了两次演示，无需多讲。一个是运用矩阵乘法去检验矩阵的乘法分配律是否可以使用！
题目是给出A，B，C三个矩阵，计算AB + AC是否等于A(B+C)。也是无需多说！但是需要给大家说明的一点是，在矩阵的运算中，可以放心大胆的拆解括号，不仅仅是AB + AC = A(B+C)，同样的A(BC) = (AB)C。这证明起来比较复杂，记住就好，这回给你后面的学习带来简便！